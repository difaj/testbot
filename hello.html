<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Telegram Mini App</title>
<script src="https://tgme.stel.com/js/telegram-web-app-beta.js?87"></script>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: var(--tg-theme-bg-color, #ffffff);
  color: var(--tg-theme-text-color, #000000);
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.card {
  width: 320px;
  padding: 20px;
  border-radius: 16px;
  background: var(--tg-theme-secondary-bg-color, #f2f2f2);
  text-align: center;
  box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

button {
  width: 100%;
  padding: 10px;
  margin-top: 12px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  font-size: 14px;
  background: var(--tg-theme-button-color, #2481cc);
  color: var(--tg-theme-button-text-color, #ffffff);
}
</style>
</head>

<body>
<div class="card">
  <h2>Mini App</h2>
  <p id="user-info">Loading user...</p>
  <button onclick="toggleMode()">Toggle Emoji Mode</button>
  <button onclick="closeApp()">Close WebView</button>
</div>

<script>
const tg = window.Telegram?.WebApp;

if (!tg) {
  document.body.innerHTML = "Open inside Telegram";
  throw new Error("Telegram WebApp not found");
}

tg.ready();
tg.expand();

const user = tg.initDataUnsafe?.user;
document.getElementById("user-info").innerText =
  user ? `Hello, ${user.first_name}!` : "Open inside Telegram";

// ðŸ”¥ Custom Premium Emoji ID (10â€“20 Ñ†Ð¸Ñ„Ñ€)
const EMOJI_ID = "5368324170671202286";

let emojiMode = false; // false = Ñ‚Ñ–Ð»ÑŒÐºÐ¸ ÐµÐ¼Ð¾Ð´Ð¶Ñ–, true = Ñ‚ÐµÐºÑÑ‚ + ÐµÐ¼Ð¾Ð´Ð¶Ñ–

function updateButtons() {

  if (!emojiMode) {
    // ===== Ð ÐµÐ¶Ð¸Ð¼ 1 â€” Ñ‚Ñ–Ð»ÑŒÐºÐ¸ ÐµÐ¼Ð¾Ð´Ð¶Ñ– =====
    tg.MainButton.setParams({
      text: " ", // Ð¿Ñ€Ð¾Ð±Ñ–Ð» Ñ‰Ð¾Ð± Telegram Ð½Ðµ ÐºÐ¸Ð½ÑƒÐ² Ð¿Ð¾Ð¼Ð¸Ð»ÐºÑƒ
      icon_custom_emoji_id: EMOJI_ID,
      is_active: true
    });

    if (tg.SecondaryButton) {
      tg.SecondaryButton.setParams({
        text: " ",
        icon_custom_emoji_id: EMOJI_ID,
        is_active: true
      });
      tg.SecondaryButton.show();
    }

  } else {
    // ===== Ð ÐµÐ¶Ð¸Ð¼ 2 â€” Ñ‚ÐµÐºÑÑ‚ + ÐµÐ¼Ð¾Ð´Ð¶Ñ– =====
    tg.MainButton.setParams({
      text: "Button 1",
      icon_custom_emoji_id: EMOJI_ID,
      is_active: true
    });

    if (tg.SecondaryButton) {
      tg.SecondaryButton.setParams({
        text: "Button 2",
        icon_custom_emoji_id: EMOJI_ID,
        is_active: true
      });
      tg.SecondaryButton.show();
    }
  }

  tg.MainButton.show();
}

updateButtons();

function toggleMode() {
  emojiMode = !emojiMode;
  updateButtons();
}

// ÐÐ°Ñ‚Ð¸ÑÐºÐ°Ð½Ð½Ñ Ð½Ð° ÐºÐ½Ð¾Ð¿ÐºÐ¸ Telegram
tg.MainButton.onClick(() => {
  tg.showPopup({
    message: "Main button pressed",
    buttons: [{ type: "ok" }]
  });
});

if (tg.SecondaryButton) {
  tg.SecondaryButton.onClick(() => {
    tg.showPopup({
      message: "Secondary button pressed",
      buttons: [{ type: "ok" }]
    });
  });
}

function closeApp() {
  tg.close();
}
</script>
</body>
</html>
