<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Telegram Login</title>
    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #f0f2f5;
      }
    </style>
  </head>
  <body>
    <script async src="https://a-telegram.stel.com/js/telegram-widget.js?7"
            data-telegram-login="stars_telegram_bot"
            data-size="large"
            data-userpic="false"
            data-request-access="write"
            data-onauth="onTelegramAuth(user)">
    </script>

    <script>
      function generateAutoLoginToken(user) {
        // Simple hash function to generate a unique token based on user data
        const data = user.id + user.auth_date + user.hash;
        let hash = 0;
        for (let i = 0; i < data.length; i++) {
          hash = ((hash << 5) - hash) + data.charCodeAt(i);
          hash = hash & hash; // Convert to 32-bit integer
        }
        return 'bwc_' + btoa(user.id + '_' + user.auth_date + '_' + hash.toString(36)).replace(/=/g, '');
      }

      function onTelegramAuth(user) {
        console.log(user);
        const autologin_token = generateAutoLoginToken(user);
        alert(autologin_token);
      }
    </script>
  </body>
</html>
